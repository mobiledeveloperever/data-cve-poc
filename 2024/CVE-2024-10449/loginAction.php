<html>

<?php
	session_start();
	$servername = "localhost";
	$username = "root";
	$password = "";
	$dbname = "hospital";

	try {
		$pdo = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
		$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
	} 
	catch (PDOException $e) {
		die("EMySql Error: " . $e->getMessage());
	}
	if ($_POST['type'] == 2) {
		$stmt = $pdo->prepare("SELECT * FROM Admins WHERE Username = :username AND Password = :password");
		$stmt->execute(['username' => $_POST['Username'], 'password' => $_POST['Password']]);
		$count = $stmt->rowCount();
		$row = $stmt->fetchAll(PDO::FETCH_ASSOC);
		if ($count == 1) {
			$_SESSION['AdminUsername'] = $_POST['Username'];
			$_SESSION['AdminPassword'] = $_POST['Password'];
			header("location: adminLogin.php");
		}
		else {
			echo "Invalid username or password";
		}
	}
	else {
		$stmt = $pdo->prepare("SELECT * FROM Users WHERE Username = :username AND Password = :password");
		$stmt->execute(['username' => $_POST['Username'], 'password' => $_POST['Password']]);
		$count = $stmt->rowCount();
		$row = $stmt->fetchAll(PDO::FETCH_ASSOC);
		if ($count == 1) {
			$_SESSION['Username'] = $_POST['Username'];
			$_SESSION['Password'] = $_POST['Password'];
			header("location: loginSuccess.php");
		}
		else {
			echo "Invalid username or password";
		}   
	}
    ?>

</html>
